<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>BATTLEBOTS</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.5.1/jquery-3.5.1.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Lisa Anders</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-user"></span>
     
    About
  </a>
</li>
<li>
  <a href="cv.html">
    <span class="fa fa-file-pdf-o"></span>
     
    CV
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-database"></span>
     
    R Projects
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="battlebots.html">Battlebots Brackets</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-birthday-cake"></span>
     
    The Workshop
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="resin.html">Resin Dice</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a>
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.facebook.com/LisamaeAnders/">
    <span class="fa fa-facebook-f fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.goodreads.com/user/show/47707460-lisa">
    <span class="fa fa-book fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/leesahanders">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/lisa-anders-engineer/">
    <span class="fa fa-linkedin fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">BATTLEBOTS</h1>

</div>


<div id="what-is-battlebots" class="section level2 tabset">
<h2 class="tabset">What is Battlebots?</h2>
<p>BattleBots is a robotic combat TV show. It is an amazing community and clearly a hobby of love by the people that join the show. Robots weigh 250lbs, 500 lbs in special circumstances, and there are strict rules around what is and isn’t allowed for weapons. The show spends time both with the 3 minute match and behind the scenes with interviews with the builders, footage of repairs, last minute modifications.</p>
<div id="about-battlebots" class="section level3">
<h3>About Battlebots</h3>
<ul>
<li><a href="https://battlebots.com/">Official BattleBots page</a></li>
<li><a href="http://reddit.com/r/battlebots">Reddit Battlebots</a></li>
<li><a href="https://www.reddit.com/r/battlebots/comments/grst5y/the_battlebots_season_5_rumor_mill/">Season 5 Rumor Mill at Reddit/r/Battlebots</a></li>
<li><a href="https://docs.google.com/document/d/1tXSzwzEM2jNGjZ2KYn00ldeHvEru0y3_zlNkVw-F9iI/edit#heading=h.1wa7o4efnhdl">Combat Robot Resource Guide by Robert Cowan</a></li>
</ul>
</div>
<div id="official-battlebots-teams" class="section level3">
<h3>2019 Official Battlebots Teams</h3>
<p>2019 Battlebots teams</p>
<iframe width="1200px" height="1600px" src="https://battlebots.com/2019-season-robots/9">
<p>
Your browser does not support iframes
</p>
</iframe>
</div>
<div id="best-fight-videos" class="section level3 tabset tabset-fade tabset-pills">
<h3 class="tabset tabset-fade tabset-pills">Best Fight Videos</h3>
<p>All rights are owned by Battlebots on ABC</p>
<div id="minotaur-vs.-bombshell" class="section level4">
<h4>Minotaur vs. Bombshell</h4>
<iframe width="560" height="315" src="https://www.youtube.com/embed/89LYj3d1jCw" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="yeti-vs.-lock-jaw" class="section level4">
<h4>Yeti vs. Lock Jaw</h4>
<iframe width="560" height="315" src="https://www.youtube.com/embed/AqM8zxjfV1M" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="tombstone-vs.-bronco" class="section level4">
<h4>Tombstone vs. Bronco</h4>
<iframe width="560" height="315" src="https://www.youtube.com/embed/X2vSMMXmGdg" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="hypershock-rake" class="section level4">
<h4>Hypershock + Rake</h4>
<iframe width="560" height="315" src="https://www.youtube.com/embed/UNk5-3fGNqI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="death-roll-vs.-end-game" class="section level4">
<h4>Death Roll vs. End Game</h4>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RrA1XCtUs8I" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="huge-vs.-bronco" class="section level4">
<h4>HUGE vs. Bronco</h4>
<iframe width="560" height="315" src="https://www.youtube.com/embed/jJRskcggTnI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="witch-doctor-vs.-actual-household-items" class="section level4">
<h4>Witch Doctor Vs. actual household items</h4>
<iframe width="560" height="315" src="https://www.youtube.com/embed/DZLs52pRQis" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
</div>
<div id="official-brackets" class="section level3 tabset tabset-fade tabset-pills">
<h3 class="tabset tabset-fade tabset-pills">Official Brackets</h3>
<p>Bracket Results by Season (1-4)</p>
<div id="season-4" class="section level4">
<h4>2019 (season 4)</h4>
<iframe width="1200px" height="1600px" src="https://battlebots.com/bracket-2019">
<p>
Your browser does not support iframes
</p>
</iframe>
</div>
<div id="season-3" class="section level4">
<h4>2018 (season 3)</h4>
<iframe width="1200px" height="1600px" src="https://battlebots.com/bracket-2018">
<p>
Your browser does not support iframes
</p>
</iframe>
</div>
<div id="season-2" class="section level4">
<h4>2016 (season 2)</h4>
<iframe width="1200px" height="1600px" src="https://battlebots.com/bracket-s2/">
<p>
Your browser does not support iframes
</p>
</iframe>
</div>
<div id="season-1" class="section level4">
<h4>2015 (season 1)</h4>
<iframe width="1200px" height="1600px" src="https://battlebots.com/bracket-s1/">
<p>
Your browser does not support iframes
</p>
</iframe>
<hr />
</div>
</div>
</div>
<div id="battlebots-analysis" class="section level2">
<h2>Battlebots Analysis</h2>
<p>Below is my attempt at diving deep into the world of Battlebots to understand what makes some bots more successful than others. All data is from the Battlebots official website, scraped from the web using the Rvest R package developed by Hadley Wickam.</p>
<pre class="r"><code>library(rvest)
library(dplyr)
library(tidyverse)
library(ggplot2)
library(plotly)
library(data.table)
library(stringr)
#devtools::install_github(&quot;lchiffon/wordcloud2&quot;)
library(wordcloud2)
library(RColorBrewer)
library(ggmap)
library(maps)
library(ggrepel)
library(sf)
library(&quot;rnaturalearth&quot;)
library(&quot;rnaturalearthdata&quot;)
library(htmlwidgets)
library(webshot)
library(tidygeocoder)
library(rgeos)


# Set URL list
#urls = c(&quot;https://battlebots.com/robot/yeti-2019/&quot;)
#url &lt;- &quot;https://battlebots.com/robot/yeti-2019/&quot;

# Check if data already exists, if not download it
if(file.exists(&quot;./files/battlebotsinfo.csv&quot;)){
  message(&quot;Loading saved files&quot;)
  
  battlebotsinfo = read.csv(&quot;./files/battlebotsinfo.csv&quot;, stringsAsFactors=FALSE)
  battlebotsmatch = read.csv(&quot;./files/battlebotsmatch.csv&quot;, stringsAsFactors=FALSE)
  battlebotsstat = read.csv(&quot;./files/battlebotsstat.csv&quot;, stringsAsFactors=FALSE)
  
} else {
  message(&quot;Generating battlebots data files&quot;)
  
  urls = read.csv(&quot;./files/battlebotsurls.csv&quot;, stringsAsFactors=FALSE)
  
  for( i in 1:nrow(urls) ){
    url = urls[i,1]
    
    print(paste0(&quot;Reading &quot;, i, &quot; of &quot;, nrow(urls), &quot;: &quot;, url))
    
    # Read info and arrange into table 
    # (note that this isn&#39;t actually a table in the html source so we had to jump through some hoops to make that happen)
    info &lt;- read_html(url) %&gt;%
      html_nodes(&quot;.info-grid&quot;) %&gt;%
      html_text()
    
    info_df_tmp &lt;- map(info, function(x) {
      tibble(text = unlist(str_split(x, pattern = &quot;\\n&quot;))) %&gt;%
        rowid_to_column(var = &quot;line&quot;)
    })
    
    info_df &lt;- bind_rows(info_df_tmp, .id = &quot;page&quot;) 
    
    # Trim off leading whitespace
    info_trim &lt;- slice(info_df, which.max(text == &quot;Robot:&quot;) : n()) %&gt;%
      select(text)
    
    # Split into multiple rows , remediate any cases where Values are part of the Record
    info_split &lt;- info_trim %&gt;%
      mutate(text = str_trim(text)) %&gt;% 
      mutate(Record = ifelse(grepl(&quot;:&quot;, text, fixed = TRUE), text, NA)) %&gt;%
      separate(Record, into = c(&quot;Record&quot;, &quot;Value&quot;), sep = &quot;:&quot;, remove = FALSE) %&gt;%
      fill(Record) %&gt;%
      mutate(Value = ifelse(is.na(Value), 
               ifelse(grepl(&quot;:&quot;, text, fixed = TRUE), NA, text), Value )) %&gt;%
      select(Record, Value) %&gt;%
      filter(!is.na(Value)) %&gt;%
      filter(!grepl(&quot;^\\s*$&quot;, Value)) %&gt;%
      unique() %&gt;%
      group_by(Record) %&gt;%
      summarize(Value = paste0(Value, collapse = &quot;, &quot;)) %&gt;%
      ungroup() %&gt;%
      pivot_wider(names_from = Record, values_from = Value) %&gt;%
      mutate_all(as.character)
    
    # Robot name 
    robot = info_split$Robot
    
    # Read both history tables and wrangle into table form
    history &lt;- read_html(url) %&gt;%
      html_nodes(&quot;.igsv-table&quot;) 
    
    if(length(history) &gt; 0){
    stat_history &lt;- history[1] %&gt;% html_table(header = TRUE, fill = TRUE)
    stat_history_df &lt;- stat_history[[1]] %&gt;%
      mutate(Robot = robot) %&gt;%
      mutate_all(as.character)
    }
    
    if(length(history) &gt; 1){
      match_history &lt;- history[2] %&gt;% html_table(header = TRUE, fill = TRUE)
      match_history_df &lt;- match_history[[1]] %&gt;%
        mutate(Robot = robot) %&gt;%
        mutate_all(as.character)
    }
    
    # Compile
    if(i==1){
      battlebotsinfo = info_split
      battlebotsmatch = match_history_df
      battlebotsstat = stat_history_df
    } else {
      battlebotsinfo = bind_rows(battlebotsinfo, info_split)
      
      if(length(history) &gt; 0){
        battlebotsstat = bind_rows(battlebotsstat, stat_history_df)
      }
      
      if(length(history) &gt; 1){
        battlebotsmatch = bind_rows(battlebotsmatch, match_history_df)
      }
      
    }
    
  } # End for loop 
  
  # Save files to make it easier next time
  write.csv(battlebotsinfo, &quot;./files/battlebotsinfo.csv&quot;)
  write.csv(battlebotsmatch, &quot;./files/battlebotsmatch.csv&quot;)
  write.csv(battlebotsstat, &quot;./files/battlebotsstat.csv&quot;)

}


# References:
# https://community.rstudio.com/t/convert-character-string-into-table/9158
# https://stackoverflow.com/questions/42419765/convert-one-column-into-a-new-column-every-5-rows-a-numeric-interval
#  - [Scraping in R rvest](https://www.dataquest.io/blog/web-scraping-in-r-rvest/)
#  - [Tidy Web Scraping in R Tutorial and Resources](https://towardsdatascience.com/tidy-web-scraping-in-r-tutorial-and-resources-ac9f72b4fe47)</code></pre>
<div id="frequency-of-battlebots-weapon-types" class="section level3">
<h3>Frequency of Battlebots Weapon Types</h3>
<pre class="r"><code>type_frequency &lt;- battlebotsinfo %&gt;%
  group_by(Type) %&gt;%
  summarize(freq = n()) %&gt;%
  rename(&quot;word&quot; = &quot;Type&quot;)
  
my_wordcloud &lt;- wordcloud2(data=type_frequency, size = 0.5, shape = &#39;pentagon&#39;, color=&#39;random-dark&#39;)

saveWidget(my_wordcloud, &quot;tmp.html&quot;, selfcontained = F)
#webshot(&quot;tmp.html&quot;, &quot;./images/wc1.png&quot;, delay = 5)

#wordcloud2(demoFreq, color = &quot;random-light&quot;, backgroundColor = &quot;grey&quot;)

# https://towardsdatascience.com/create-a-word-cloud-with-r-bde3e7422e8a
# https://cran.r-project.org/web/packages/wordcloud2/vignettes/wordcloud.html#lettercloud-function</code></pre>
<iframe src="tmp.html" width="1000px" height="600px">
</iframe>
<p><br></p>
</div>
<div id="frequency-of-builder-day-jobs" class="section level3">
<h3>Frequency of Builder Day Jobs</h3>
<pre class="r"><code>job_frequency &lt;- battlebotsinfo %&gt;%
  group_by(Job) %&gt;%
  summarize(freq = n()) %&gt;%
  rename(&quot;word&quot; = &quot;Job&quot;)
  
my_wordcloud &lt;- wordcloud2(data=job_frequency, size = 0.25, color=&#39;random-dark&#39;)
saveWidget(my_wordcloud, &quot;tmp1.html&quot;, selfcontained = F)
#webshot(&quot;tmp.html&quot;, &quot;./images/wc2.png&quot;, delay = 5)

#wordcloud2(demoFreq, color = &quot;random-light&quot;, backgroundColor = &quot;grey&quot;)

# https://towardsdatascience.com/create-a-word-cloud-with-r-bde3e7422e8a
# https://cran.r-project.org/web/packages/wordcloud2/vignettes/wordcloud.html#lettercloud-function</code></pre>
<iframe src="tmp1.html" width="1000px" height="600px">
</iframe>
<p><br></p>
</div>
<div id="map-of-builder-locations" class="section level3">
<h3>Map of Builder Locations</h3>
<pre class="r"><code>#Load location data
if(file.exists(&quot;./files/battlebotslocation.csv&quot;)){
  message(&quot;Loading saved files&quot;)
  
  bbmap = read.csv(&quot;./files/battlebotslocation.csv&quot;, stringsAsFactors=FALSE)
} else {
  message(&quot;Generating battlebots location files&quot;)
  
  #Set up the API key for google 
  #Go to: https://cloud.google.com/maps-platform/
  #register_google(key = &quot;AIzaSyDmZUFZ-RzL0mnpO9-CELahrnEWdJwYqDw&quot;, write = TRUE)
  
  bbmap &lt;- battlebotsinfo %&gt;%
    select(Robot, Hometown) %&gt;%
    mutate(Team = paste(&quot;Team&quot;, Robot, &quot;, from&quot;, Hometown)) %&gt;%
    mutate_geocode(Hometown)
  
  write.csv(bbmap, &quot;./files/battlebotslocation.csv&quot;)
}
  
world &lt;- ne_countries(scale = &quot;medium&quot;, returnclass = &quot;sf&quot;)

p &lt;- ggplot(data = world) + 
  geom_sf(color = &quot;black&quot;, fill = &quot;lightgray&quot;) +
  xlab(&quot;Longitude&quot;) + ylab(&quot;Latitude&quot;) +
  geom_point( data=bbmap, aes(x=lon, y=lat, text=Team), color=&quot;red&quot;, size=1) +
  # ggrepel::geom_label_repel(data = bbmap,
  #            aes(x = lon, y = lat, label = Robot),
  #            size = 1.5, alpha = 0.8,
  #            label.r = unit(0.5, &quot;lines&quot;), label.size = 0.25,
  #            segment.color = &quot;red&quot;, segment.size = 1,
  #            seed = 1002) +
  #geom_text_repel(data=bbmap,aes(x = lon, y = lat, label = Robot),box.padding = 0.4,point.padding = 0.25,size=4,show.legend=FALSE)+
  ggtitle(&quot;Battlebots Hometowns World map&quot;, subtitle = paste0(&quot;(&quot;, length(unique(bbmap$Robot)), &quot; teams)&quot;))

#pp &lt;- ggplotly(p, tooltip=&quot;text&quot;)

#assign(&quot;pp&quot;, plotly::ggplotly(p, tooltip=&quot;text&quot;), envir=parent.frame())

#pp

p</code></pre>
<p><img src="battlebots_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>#htmlwidgets::saveWidget( plotly::ggplotly(p, tooltip=&quot;text&quot;), &quot;tmp3.html&quot;)

#print( htmltools::tags$iframe(src=&quot;temp.html&quot;, width=640, height=480) )

# &lt;iframe src=&quot;temp.html&quot; width=&#39;1000px&#39; height=&#39;800px&#39;&gt;&lt;/iframe&gt; 

  
#https://stackoverflow.com/questions/29037851/how-do-i-plot-us-cities-using-ggplot
#https://stackoverflow.com/questions/22752009/plot-on-ggmap-by-using-city-and-state
#https://towardsdatascience.com/plotting-spatial-data-in-r-a38a405a07f1
#https://cran.r-project.org/web/packages/usmap/vignettes/advanced-mapping.html 
#https://www.r-graph-gallery.com/330-bubble-map-with-ggplot2.html
#https://ggplot2-book.org/maps.html
#http://yluo86.github.io/rmaps
#https://www.r-spatial.org/r/2018/10/25/ggplot2-sf.html
#https://www.statsandr.com/blog/world-map-of-visited-countries-in-r/
#https://cran.r-project.org/web/packages/tidygeocoder/vignettes/tidygeocoder.html
#https://towardsdatascience.com/reverse-geocoding-in-r-f7fe4b908355
#https://stackoverflow.com/questions/13905098/how-to-get-the-longitude-and-latitude-coordinates-from-a-city-name-and-country-i
#https://stackoverflow.com/questions/59144842/why-does-ggplotly-does-not-work-in-rmarkdown-the-same-way-ggplot-does</code></pre>
<p><br></p>
</div>
<div id="win-frequency-by-robot-type" class="section level3">
<h3>Win Frequency by Robot Type</h3>
<pre class="r"><code>win_frequency_raw &lt;- merge(battlebotsinfo, battlebotsstat, by=&quot;Robot&quot;) %&gt;%
  select(Stats, Career, Robot, Type) %&gt;%
  filter(Stats %in% c(&quot;Total matches&quot;, &quot;Total wins&quot;)) %&gt;%
  #mutate(Career = as.numeric(Stats)) %&gt;%
  pivot_wider(names_from = Stats, values_from = Career) %&gt;%
  unnest(`Total wins`) %&gt;%
  mutate(`Total wins` = as.numeric(`Total wins`),
         `Total matches` = as.numeric(`Total matches`))

type_wins &lt;- win_frequency_raw %&gt;%
  group_by(Type) %&gt;%
  summarize(wins = sum(`Total wins`) / sum(`Total matches`))

robot_wins &lt;- win_frequency_raw %&gt;%
  group_by(Type) %&gt;%
  mutate(CountType = n()) %&gt;%
  ungroup() %&gt;%
  group_by(Robot, Type, CountType) %&gt;%
  summarize(wins = sum(`Total wins`) / sum(`Total matches`)) %&gt;%
  filter(CountType &gt; 1) %&gt;%
  arrange(wins)



p &lt;- ggplot(robot_wins, aes(x=Type, y=wins)) + geom_boxplot() + theme(axis.text.x = element_text(angle = -90, hjust = 1))


p &lt;- ggplot(robot_wins, aes(x=reorder(Type, -wins, na.rm = TRUE), y=wins)) + geom_boxplot() + theme(axis.text.x = element_text(angle = -90, hjust = 1)) +  labs(y=&quot;Wins&quot;, x=&quot;Type&quot;)
p</code></pre>
<p><img src="battlebots_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code># ggplot(robot_wins, aes(wins, Type)) + geom_boxplot()</code></pre>
</div>
</div>
<div id="resources" class="section level2">
<h2>Resources</h2>
<p>Battlebots:</p>
<ul>
<li><a href="https://battlebots.com/">Official BattleBots page</a></li>
<li><a href="http://reddit.com/r/battlebots">Reddit Battlebots</a></li>
<li><a href="https://www.reddit.com/r/battlebots/comments/grst5y/the_battlebots_season_5_rumor_mill/">Season 5 Rumor Mill at Reddit/r/Battlebots</a></li>
<li><a href="https://docs.google.com/document/d/1tXSzwzEM2jNGjZ2KYn00ldeHvEru0y3_zlNkVw-F9iI/edit#heading=h.1wa7o4efnhdl">Combat Robot Resource Guide by Robert Cowan</a></li>
</ul>
<p>Resources for building a similar RMarkdown page:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/42631642/creating-dynamic-tabs-in-rmarkdown">Creating dynamic tabs in Rmarkdown</a></li>
<li><a href="https://cran.r-project.org/web/packages/stationery/vignettes/HTML_special_features.html">HTML Special Features: KU CRMDA Markdown</a></li>
<li><a href="https://github.com/rstudio/rmarkdown/issues/1681" class="uri">https://github.com/rstudio/rmarkdown/issues/1681</a></li>
<li><a href="https://stackoverflow.com/questions/58837184/r-2-column-layout-in-rmarkdown-with-tabset">R: 2 column layout in Rmarkdown with tabset</a></li>
<li><a href="https://www.dataquest.io/blog/web-scraping-in-r-rvest/">Scraping in R rvest</a></li>
<li><a href="https://towardsdatascience.com/tidy-web-scraping-in-r-tutorial-and-resources-ac9f72b4fe47">Tidy Web Scraping in R Tutorial and Resources</a></li>
</ul>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
